<?xml version="1.0" encoding="utf-8"?>
<!--
    Install ANT from http://ant.apache.org/bindownload.cgi
    Basically, unzip it somewhere, and add it to the PATH environment variable
-->
<project basedir="." name="Download and Setup" default="setup" >

    <property file="setup.properties"/>

    <condition property="is.windows">
        <os family="windows" />
    </condition>
    <target name="download.windows" description="Download Windows dependencies" if="is.windows" >
        <sequential>
            <echo>Getting Windows Tools...</echo>
            <!-- verbose='true' is worthless.  Just fills the screen with dots. -->
            <get dest="${depends}" skipexisting="true"  >
                <url url="${windows.python.url}"/>
                <url url="${windows.AIRSDK.url}"/>
                <url url="${windows.cocos2d.url}"/>
                <url url="${windows.androidsdk.url}"/>
                <url url="${windows.androidndk.url}"/>
            </get>
            <echo>Extracting...</echo>
            <unzip src="${depends}/${windows.AIRSDK.filename}" dest="${depends}/${windows.AIRSDK.unpacked}" />
            <unzip src="${depends}/${windows.cocos2d.filename}" dest="${depends}" />
            <unzip src="${depends}/{windows.androidsdk.filename}" dest="${depends}" />
			<!-- Evil self-extracting executable -->
			<exec executable="${windows.androidndk.filename}" dir="${depends}" failonerror="true" searchpath="false" >
			</exec>
			<!-- Launch interactive Python installer -->
			<exec executable="start" dir="${depends}" failonerror="true" searchpath="true" >
                <arg line="${windows.python.filename}" /> 
            </exec>
        </sequential>
    </target>
    
    <condition property="is.osx">
        <and>
            <os family="mac"/>
            <os family="unix"/>
        </and>
    </condition>
    <target name="download.osx" description="Download OS X dependencies" if="is.osx" >
        <sequential>
            <echo>Getting OS X Tools...</echo>
            <!-- verbose='true' is worthless.  Just fills the screen with dots. -->
            <get dest="${depends}" skipexisting="true" >
                <url url="${osx.AIRSDK.url}"/>
                <url url="${osx.cocos2d.url}"/>
                <url url="${osx.androidsdk.url}"/>
                <url url="${osx.androidndk.url}"/>
            </get>
            <echo>Decompressing...</echo>
        </sequential>
    </target>
    
    <condition property="is.linux">
        <and>
            <os family="unix"/>
            <not><os family="mac"/></not>
        </and>
    </condition>
    <target name="download.linux" description="Download Linux dependencies" if="is.linux" >
        <sequential>
            <echo>Getting Linux/Unix Tools...</echo>
            <!-- verbose='true' is worthless.  Just fills the screen with dots. -->
            <get dest="${depends}" skipexisting="true"  >
                <url url="${linux.AIRSDK.url}"/>
                <url url="${linux.cocos2d.url}"/>
                <url url="${linux.androidsdk.url}"/>
                <url url="${linux.androidndk.url}"/>
            </get>
            <echo>Decompressing...</echo>
        </sequential>
    </target>

    <!--
        Setup: 
            Depends: Check OS types and invoke the one that matches
    -->
    <target name="setup" description="Download Based On OS" depends="download.windows,download.osx,download.linux" >
    
    </target>    
</project>

